2023-03-25 00:04:26 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:04:48 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:06:07 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:06:17 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:08:06 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:08:14 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:08:34 error: uncaughtException: Cannot read properties of undefined (reading 'sync')
TypeError: Cannot read properties of undefined (reading 'sync')
    at App.connectToDatabase (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:46:18)
    at new App (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/app.ts:25:10)
    at Object.<anonymous> (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/server.ts:8:13)
    at Module._compile (node:internal/modules/cjs/loader:1155:14)
    at Module.m._compile (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1618:23)
    at Module._extensions..js (node:internal/modules/cjs/loader:1209:10)
    at Object.require.extensions.<computed> [as .ts] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1033:32)
    at Function.Module._load (node:internal/modules/cjs/loader:868:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
2023-03-25 00:10:05 error: uncaughtException: Cannot read properties of undefined (reading 'addLimitNumFromShare')
TypeError: Cannot read properties of undefined (reading 'addLimitNumFromShare')
    at userAuth (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/controllers/miniprogram.controller.ts:116:20)
    at Layer.handle [as handle_request] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/route.js:144:13)
    at Route.dispatch (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/route.js:114:3)
    at Layer.handle [as handle_request] (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/layer.js:95:5)
    at /Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/index.js:175:3)
    at router (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/node_modules/express/lib/router/index.js:47:12)
2023-03-25 00:13:25 error: uncaughtException: Op is not defined
ReferenceError: Op is not defined
    at MiniProgramController.addLimitNumFromShare (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/controllers/miniprogram.controller.ts:20:12)
    at MiniProgramController.userAuth (/Users/junping.yao/workspace_others/ai-chat/wx-mp-node-express/src/controllers/miniprogram.controller.ts:116:20)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
2023-03-25 22:59:03 error: [POST] /miniprogram/chatmessage/history >> StatusCode:: 500, Message:: Method not implemented.
